<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../layouts/head', { title: 'Forgot Password - helloRun' }) %>
  <link rel="stylesheet" href="/css/forgot-password.css">
</head>
<body>
  <%- include('../layouts/nav') %>
  
  <main class="forgot-password-page">
    <div class="forgot-password-container">
      <div class="forgot-password-card">
        <div class="forgot-password-icon">
          <i data-lucide="key-round"></i>
        </div>
        
        <h1>Forgot Password?</h1>
        <p class="forgot-password-subtitle">
          No worries! We'll send you a secure link to reset your password and get you back to running.
        </p>
        
        <% if (locals.error) { %>
          <div class="alert alert-error">
            <i data-lucide="alert-circle"></i>
            <span><%= error %></span>
          </div>
        <% } %>
        
        <% if (locals.success) { %>
          <div class="alert alert-success">
            <i data-lucide="check-circle"></i>
            <span><%= success %></span>
          </div>
        <% } %>
        
        <form action="/forgot-password" method="POST" class="auth-form" id="forgotPasswordForm">
          <div class="form-group">
            <input 
              type="email" 
              id="email" 
              name="email" 
              placeholder=" " 
              required
              autocomplete="email"
            >
            <label for="email">Email Address</label>
            <i data-lucide="mail" class="input-icon"></i>
          </div>
          
          <button type="submit" class="btn-full" id="submitBtn">
            <span class="btn-text">Send Reset Link</span>
            <span class="btn-loading" style="display: none;">
              Sending...
            </span>
          </button>
        </form>
        
        <div class="auth-divider">
          <span>OR</span>
        </div>

        <div class="auth-links">
          <a href="/login" class="auth-link">
            <i data-lucide="log-in"></i>
            Back to Login
          </a>
          
          <a href="/signup" class="auth-link">
            <i data-lucide="user-plus"></i>
            Create New Account
          </a>
        </div>

        <div class="help-text">
          <i data-lucide="info"></i>
          <strong>Tip:</strong> Check your spam folder if you don't receive the email within a few minutes.
        </div>
      </div>
    </div>
  </main>
  
  <%- include('../layouts/footer') %>
  
  <script src="/js/main.js"></script>
  <script>
    lucide.createIcons();

    // Form submission handling with loading state
    document.getElementById('forgotPasswordForm').addEventListener('submit', function(e) {
      const submitBtn = document.getElementById('submitBtn');
      const btnText = submitBtn.querySelector('.btn-text');
      const btnLoading = submitBtn.querySelector('.btn-loading');
      
      submitBtn.disabled = true;
      btnText.style.display = 'none';
      btnLoading.style.display = 'inline';
    });

    // Auto-focus email input
    document.getElementById('email').focus();
  </script>
</body>
</html>