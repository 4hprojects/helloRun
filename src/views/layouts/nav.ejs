<!-- filepath: c:\Users\Kayla\Desktop\PersonalProjects\helloRun\src\views\layouts\nav.ejs -->
<!-- Navigation Bar -->
<nav class="nav <% if (locals.isAuthPage) { %>nav-auth<% } %>" role="navigation" aria-label="Main navigation">
  <div class="nav-container">
    <a href="/" class="logo" aria-label="HelloRun Home">
      <img src="/images/helloRun-icon.webp" alt="" class="logo-icon">
      <span>HelloRun</span>
    </a>
    
    <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
      <i data-lucide="menu"></i>
    </button>
    
    <div class="nav-links" id="nav-links">
      <a href="/">Home</a>
      <a href="/events">Events</a>
      <a href="/blog">Blog</a>
      <a href="/leaderboard">Leaderboard</a>

      <% if (locals.isAuthenticated) { %>
        <!-- Role-based dashboard link -->
        <% if (locals.isAdmin) { %>
          <a href="/admin/dashboard">Admin</a>
        <% } else if (locals.isApprovedOrganizer) { %>
          <a href="/organizer/dashboard">Dashboard</a>
        <% } else if (locals.isOrganizer) { %>
          <a href="/organizer/application-status">My Application</a>
        <% } else { %>
          <a href="/runner/dashboard">Dashboard</a>
        <% } %>

        <!-- User menu -->
        <div class="nav-user" aria-label="User menu">
          <span class="nav-username">Hi, <%= locals.user ? locals.user.firstName : 'User' %></span>
          <form action="/logout" method="POST" class="logout-form">
            <button type="submit" class="nav-logout-btn">
              <i data-lucide="log-out" style="width:16px;height:16px;"></i>
              Logout
            </button>
          </form>
        </div>
      <% } else { %>
        <!-- Guest buttons -->
        <div class="nav-auth-buttons">
          <a href="/login" class="nav-login-btn">Login</a>
          <a href="/signup" class="nav-signup-btn">Sign Up</a>
        </div>
      <% } %>
    </div>
  </div>
</nav>