<!-- filepath: c:\Users\Kayla\Desktop\PersonalProjects\helloRun\src\views\layouts\nav.ejs -->
<!-- Navigation Bar -->
<nav class="nav <% if (locals.isAuthPage) { %>nav-auth<% } %>">
  <div class="nav-container">
    <a href="/" class="logo">
      <img src="/images/helloRun-icon.webp" alt="HelloRun Logo" class="logo-icon">
      <span>HelloRun</span>
    </a>
    
    <button class="menu-toggle" aria-label="Toggle menu">
      <i data-lucide="menu"></i>
    </button>
    
    <div class="nav-links">
      <!-- Always show these links -->
      <a href="/">Home</a>
      <a href="/events">Events</a>
      <a href="/blog">Blog</a>
      <a href="/about">About</a>
      
      <% if (locals.isAuthenticated && locals.user) { %>
        <!-- Logged In State -->
        
        <!-- Dashboard Link (role-based) -->
        <% if (locals.isAdmin) { %>
          <a href="/admin/dashboard">Admin</a>
        <% } else if (locals.isApprovedOrganizer) { %>
          <!-- TODO: Phase 6B - Create /organiser/dashboard -->
          <a href="/events">Dashboard</a>
        <% } else if (locals.isOrganizer) { %>
          <a href="/organizer/complete-profile">Complete Profile</a>
        <% } else { %>
          <!-- TODO: Phase 6A - Create /dashboard -->
          <a href="/events">My Events</a>
        <% } %>
        
        <!-- User Menu -->
        <div class="user-menu">
          <span class="user-greeting">Hi, <%= locals.user.firstName %>!</span>
          
          <!-- Logout Form (POST request) -->
          <form action="/logout" method="POST" class="logout-form">
            <button type="submit" class="btn-logout">
              <i data-lucide="log-out"></i>
              Logout
            </button>
          </form>
        </div>
        
      <% } else { %>
        <!-- Logged Out State -->
        <!-- Hide "Get Started" on auth pages (login, signup, etc.) -->
        <% if (!locals.isAuthPage) { %>
          <a href="/login" class="btn btn-primary">Get Started</a>
        <% } %>
      <% } %>
    </div>
  </div>
</nav>