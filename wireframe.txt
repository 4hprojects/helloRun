How we will build helloRun step-by-step

Phase 0: Project skeleton (MVC baseline) âœ… COMPLETED

Goal: You can run the app locally with pages loading.

What you built:
âœ… Express server
âœ… EJS views with layouts
âœ… MVC folders structure
âœ… MongoDB connection
âœ… Base layout + navigation + footer components
âœ… Mobile-responsive navigation with hamburger menu
âœ… Lucide icons integration

Folder structure (MVC):
hellorun/
  src/
    config/
      db.js âœ…
      session.js âœ…
    controllers/
      auth.controller.js âœ…
      page.controller.js âœ…
    middleware/
      auth.middleware.js âœ…
      role.middleware.js âœ…
    models/
      User.js âœ…
      Counter.js âœ…
      OrganiserApplication.js âœ…
      Event.js âœ…
      Registration.js âœ…
      Submission.js âœ…
    routes/
      auth.routes.js âœ…
      page.routes.js âœ…
      organiser.routes.js âœ…
      event.routes.js âœ…
      admin.routes.js âœ…
    services/
      password.service.js âœ…
      email.service.js âœ…
      counter.service.js âœ…
      token.service.js âœ…
      upload.service.js âœ…
    scripts/
      initCounter.js âœ…
      migrateUserIds.js âœ…
    views/
      layouts/
        main.ejs âœ…
        nav.ejs âœ…
        footer.ejs âœ…
      pages/
        index.ejs âœ…
        events.ejs âœ…
      auth/
        login.ejs âœ…
        signup.ejs âœ…
        forgot-password.ejs âœ…
        reset-password.ejs âœ…
        reset-password-expired.ejs âœ…
        reset-email-sent.ejs âœ…
        reset-success.ejs âœ…
        resend-verification.ejs âœ…
        verify-email-sent.ejs âœ…
        verify-email-success.ejs âœ…
        verify-email-expired.ejs âœ…
      error.ejs âœ…
    public/
      css/
        style.css âœ…
        login.css âœ…
        signup.css âœ…
      js/
        main.js âœ… (mobile menu, Lucide icons)
        auth.js âœ… (password visibility toggle)
        signup.js âœ…
      images/
        helloRun-icon.webp âœ…
      sitemap.xml âœ…
      robots.txt âœ…
    server.js âœ…
  .env âœ…
  .gitignore âœ…
  package.json âœ…
  dir.text âœ…
  dns.txt âœ…
  wireframe.txt âœ…
  sitemap.md âœ…

What you have after Phase 0:
âœ… / home page (fully styled with hero, features, audience sections)
âœ… /events events page (UI ready for dynamic content)
âœ… /login and /signup pages (fully functional UI)
âœ… Complete password reset flow (forgot, reset, success, expired)
âœ… Complete email verification flow (sent, success, expired, resend)
âœ… Error page
âœ… Responsive navigation with mobile menu
âœ… Footer with links
âœ… SEO ready (sitemap.xml, robots.txt)

---

Phase 1: Auth (MongoDB) with email verification ğŸ”„ IN PROGRESS

Goal: Users can sign up, verify email, and log in securely.

Feature 1A: Email/password signup âœ… COMPLETED
âœ… Create User model with email verification fields
âœ… Hash password with bcrypt
âœ… Block duplicate email
âœ… Save authProvider: "local"
âœ… Generate email verification token
âœ… Send verification email via Resend

Feature 1B: Email verification âœ… COMPLETED
âœ… Verify email token
âœ… Mark user as verified
âœ… Handle expired tokens
âœ… Resend verification email

Feature 1C: Password reset âœ… COMPLETED
âœ… Request password reset
âœ… Generate reset token
âœ… Send reset email
âœ… Verify reset token
âœ… Update password
âœ… Handle expired tokens

Feature 1D: Login/logout â³ NEXT
â³ Verify email is verified before login
â³ Verify password
â³ Create session cookie
â³ Logout clears session
â³ Remember me functionality

Feature 1E: Protect routes â³ PENDING
â³ Middleware: requireAuth
â³ Middleware: requireRole("admin")
â³ Middleware: requireRole("organiser")
â³ Redirect to login if not authenticated

User model fields (current):
âœ… userId (custom format: HR000001)
âœ… email (unique)
âœ… firstName
âœ… lastName
âœ… authProvider: "local" or "google"
âœ… passwordHash (only if local)
âœ… role: "runner" (default), "organiser", "admin"
âœ… emailVerified (boolean)
âœ… emailVerificationToken
âœ… emailVerificationExpires
âœ… passwordResetToken
âœ… passwordResetExpires
âœ… createdAt
âœ… updatedAt

Rule enforced:
âœ… Users with authProvider="google" cannot set local password
âœ… Users with authProvider="local" cannot switch to google

---

Phase 2: Organiser application + manual approval ğŸ“‹ PENDING

Goal: Runner can apply to become organiser. Admin can approve.

Feature 2A: Runner applies â³ TODO
â³ Create organiser application form
â³ Upload ID and organization proof
â³ Store application with status: "pending"
â³ Send confirmation email

Feature 2B: Admin reviews â³ TODO
â³ Admin dashboard page
â³ List all applications
â³ Approve: sets user role to "organiser"
â³ Reject: stores reason and notifies applicant
â³ Email notifications for approval/rejection

OrganiserApplication model needs:
â³ userId (reference)
â³ businessName
â³ businessType
â³ idProofUrl
â³ orgProofUrl
â³ status: "pending", "approved", "rejected"
â³ rejectionReason
â³ reviewedBy (admin userId)
â³ reviewedAt
â³ createdAt

---

Phase 3: Event creation (organiser) ğŸ“… PENDING

Goal: Approved organisers can create and publish events.

Feature 3A: Create event â³ TODO
â³ Organiser dashboard
â³ Create event form
â³ Draft mode
â³ Publish event
â³ Store payment instructions
â³ Upload event banner/images
â³ Set event categories (5K, 10K, Half Marathon, etc.)

Feature 3B: Events list + event details â³ TODO
â³ Public events list page (filter by category, date, status)
â³ Event details page
â³ "Join Event" registration button
â³ Display organiser info
â³ Display payment instructions
â³ Show participant count

Event model needs:
â³ eventId (custom format)
â³ organiserId (userId reference)
â³ title
â³ description
â³ category (5K, 10K, etc.)
â³ startDate
â³ endDate
â³ registrationDeadline
â³ fee
â³ paymentInstructions
â³ bannerUrl
â³ status: "draft", "published", "closed", "cancelled"
â³ maxParticipants
â³ currentParticipants
â³ createdAt
â³ updatedAt

---

Phase 4: Registration + payment proof ğŸ’³ PENDING

Goal: Runner joins event and uploads payment proof for verification.

Feature 4A: Join event â³ TODO
â³ Registration form
â³ Upload payment proof
â³ Create registration with status: "pending_verification"
â³ Email confirmation to runner
â³ Notification to organiser

Feature 4B: Organiser verifies payment â³ TODO
â³ Organiser view registrations
â³ View payment proof
â³ Approve registration (status: "verified")
â³ Reject with reason
â³ Email notification to runner
â³ Runner can only submit results after verification

Registration model needs:
â³ registrationId (custom format)
â³ eventId (reference)
â³ userId (reference)
â³ paymentProofUrl
â³ paymentStatus: "pending_verification", "verified", "rejected"
â³ rejectionReason
â³ verifiedBy (organiser userId)
â³ verifiedAt
â³ createdAt

---

Phase 5: Submissions + approval ğŸƒ PENDING

Goal: Runner submits run proof, organiser approves, certificate becomes available.

Feature 5A: Submit result â³ TODO
â³ Submission form (distance, time, date)
â³ Upload proof (screenshot, photo)
â³ Create submission with status: "pending"
â³ Email notification to organiser

Feature 5B: Organiser approves â³ TODO
â³ View all submissions for event
â³ Review proof
â³ Approve submission (status: "approved")
â³ Reject with reason
â³ Mark completion
â³ Generate certificate

Feature 5C: Certificates â³ TODO
â³ Auto-generate certificate PDF
â³ Runner can download certificate
â³ Display on runner dashboard
â³ Email certificate to runner

Submission model needs:
â³ submissionId (custom format)
â³ registrationId (reference)
â³ eventId (reference)
â³ userId (reference)
â³ distance
â³ time
â³ completionDate
â³ proofUrl
â³ status: "pending", "approved", "rejected"
â³ rejectionReason
â³ certificateUrl
â³ reviewedBy (organiser userId)
â³ reviewedAt
â³ createdAt

---

Phase 6: Dashboards & Analytics ğŸ“Š PENDING

Goal: Users see their progress, organisers see event metrics.

Feature 6A: Runner Dashboard â³ TODO
â³ Upcoming events
â³ Past events
â³ Activity log
â³ Certificates earned
â³ Progress statistics

Feature 6B: Organiser Dashboard â³ TODO
â³ Event overview
â³ Participant statistics
â³ Pending registrations count
â³ Pending submissions count
â³ Revenue tracking

Feature 6C: Admin Dashboard â³ TODO
â³ Platform statistics
â³ User growth
â³ Event trends
â³ Pending applications
â³ System health

---

Phase 7: Additional Pages & Features ğŸŒŸ PENDING

Feature 7A: Static Pages â³ TODO
â³ /about - About HelloRun
â³ /how-it-works - Platform guide
â³ /contact - Contact form
â³ /faq - Frequently asked questions
â³ /blog - Running tips and articles
â³ /privacy - Privacy policy
â³ /terms - Terms of service

Feature 7B: Search & Filters â³ TODO
â³ Search events
â³ Filter by category
â³ Filter by date range
â³ Filter by location (if applicable)

Feature 7C: Notifications â³ TODO
â³ In-app notifications
â³ Email preferences
â³ Notification history

---

Phase 8: Google OAuth (Optional) ğŸ” PENDING

Goal: Users can sign up/login with Google.

â³ Google OAuth setup
â³ Passport.js integration
â³ Merge accounts (if email exists)
â³ Handle authProvider: "google"

---

Phase 9: Testing & Optimization ğŸ§ª PENDING

â³ Unit tests for services
â³ Integration tests for routes
â³ Performance optimization
â³ Security audit
â³ Mobile responsiveness testing
â³ Cross-browser testing
â³ Load testing

---

Phase 10: Deployment ğŸš€ PENDING

â³ Set up production database
â³ Configure environment variables
â³ Set up SSL certificate
â³ Deploy to hosting platform
â³ Configure domain (hellorun.online)
â³ Set up monitoring
â³ Set up backups
â³ Launch!

---

CURRENT STATUS: Phase 1 (Auth) - 75% Complete
NEXT STEPS: 
1. Complete login/logout functionality
2. Implement route protection middleware
3. Test complete auth flow
4. Move to Phase 2 (Organiser applications)